# å¾—åŠ›No.14952Wæ¡ç æ‰«æå™¨é›†æˆæ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜å¦‚ä½•ä½¿ç”¨å¾—åŠ›No.14952Wæ¡ç æ‰«æå™¨ï¼ˆUSB HIDæ¨¡å¼ï¼‰è¿›è¡Œæ¡ç /äºŒç»´ç æ‰«æã€‚

### æ”¯æŒçš„æ‰«æå™¨ç±»å‹
- **å¾—åŠ›No.14952W** - æ— çº¿2.4Gæ¡ç æ‰«æå™¨
- **å·¥ä½œæ¨¡å¼**ï¼šUSB HIDé”®ç›˜æ¨¡æ‹Ÿæ¨¡å¼
- **è¿æ¥æ–¹å¼**ï¼šUSBæ¥æ”¶å™¨ï¼ˆ2.4Gæ— çº¿ï¼‰

### æ ¸å¿ƒåŸç†

æ‰«æå™¨ä½œä¸ºUSB HIDé”®ç›˜è®¾å¤‡å·¥ä½œï¼š
1. æ’å…¥USBæ¥æ”¶å™¨åï¼ŒAndroidç³»ç»Ÿè¯†åˆ«ä¸ºé”®ç›˜è®¾å¤‡
2. æ‰«ææ¡ç æ—¶ï¼Œæ‰«æå™¨å°†æ•°æ®ä½œä¸ºé”®ç›˜è¾“å…¥å‘é€
3. åº”ç”¨ç›‘å¬é”®ç›˜äº‹ä»¶ï¼Œè§£ææ¡ç æ•°æ®
4. æ”¯æŒå¤šç§æ¡ç æ ¼å¼ï¼šEAN-13ã€UPCã€Code128ã€QR Codeç­‰

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ä¸‰å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UI Layer (Flutter)                                     â”‚
â”‚  â”œâ”€ QrScannerConfigView                                 â”‚
â”‚  â”‚  â”œâ”€ è®¾å¤‡åˆ—è¡¨å±•ç¤º                                       â”‚
â”‚  â”‚  â”œâ”€ æ‰«æçŠ¶æ€åŠ¨ç”»                                       â”‚
â”‚  â”‚  â””â”€ æ•°æ®ç»“æœæ˜¾ç¤º                                       â”‚
â”‚  â””â”€ RawKeyboardListener (é”®ç›˜äº‹ä»¶ç›‘å¬)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Service Layer (Dart)                                   â”‚
â”‚  â”œâ”€ BarcodeScannerService (GetX Service)                â”‚
â”‚  â”‚  â”œâ”€ è®¾å¤‡æ‰«æç®¡ç†                                       â”‚
â”‚  â”‚  â”œâ”€ æƒé™è¯·æ±‚å¤„ç†                                       â”‚
â”‚  â”‚  â”œâ”€ ç›‘å¬çŠ¶æ€æ§åˆ¶                                       â”‚
â”‚  â”‚  â””â”€ æ•°æ®æµç®¡ç†                                         â”‚
â”‚  â””â”€ Models                                              â”‚
â”‚     â”œâ”€ BarcodeScannerDevice (è®¾å¤‡ä¿¡æ¯)                   â”‚
â”‚     â””â”€ ScanResult (æ‰«æç»“æœ)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Native Layer (Kotlin)                                  â”‚
â”‚  â”œâ”€ BarcodeScannerPlugin                                â”‚
â”‚  â”‚  â”œâ”€ USBè®¾å¤‡æ£€æµ‹                                        â”‚
â”‚  â”‚  â”œâ”€ æƒé™ç®¡ç†                                           â”‚
â”‚  â”‚  â”œâ”€ é”®ç›˜è¾“å…¥å¤„ç†                                       â”‚
â”‚  â”‚  â””â”€ æ¡ç ç±»å‹è¯†åˆ«                                       â”‚
â”‚  â””â”€ USB Manager (Android System)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
lib/
â”œâ”€ data/
â”‚  â”œâ”€ models/
â”‚  â”‚  â””â”€ barcode_scanner_model.dart          # æ•°æ®æ¨¡å‹
â”‚  â””â”€ services/
â”‚     â””â”€ barcode_scanner_service.dart        # æœåŠ¡å±‚
â”œâ”€ modules/
â”‚  â””â”€ settings/
â”‚     â””â”€ views/
â”‚        â””â”€ qr_scanner_config_view.dart      # UIé¡µé¢
â””â”€ main.dart                                 # æœåŠ¡æ³¨å†Œ

android/
â””â”€ app/src/main/kotlin/com/holox/ailand_pos/
   â”œâ”€ BarcodeScannerPlugin.kt               # åŸç”Ÿæ’ä»¶
   â””â”€ MainActivity.kt                        # æ’ä»¶æ³¨å†Œ
```

---

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. USBè®¾å¤‡æ£€æµ‹

**åŸç”Ÿå±‚ (BarcodeScannerPlugin.kt)**

```kotlin
private fun scanUsbScanners(result: Result) {
    val deviceList = usbManager?.deviceList ?: emptyMap()
    
    val scanners = deviceList.values
        .filter { device -> isScannerDevice(device) }
        .map { device -> getDeviceInfo(device) }
    
    result.success(scanners)
}

private fun isScannerDevice(device: UsbDevice): Boolean {
    // 1. æ£€æŸ¥HIDæ¥å£
    for (i in 0 until device.interfaceCount) {
        if (device.getInterface(i).interfaceClass == USB_CLASS_HID) {
            return true
        }
    }
    
    // 2. æ£€æŸ¥å·²çŸ¥å‚å•†ID
    if (device.vendorId in KNOWN_SCANNER_VENDORS) {
        return true
    }
    
    return false
}
```

**Dartå±‚ (BarcodeScannerService.dart)**

```dart
Future<void> scanUsbScanners() async {
  isScanning.value = true;
  
  final List<dynamic> devices = 
      await _channel.invokeMethod('scanUsbScanners');
  
  detectedScanners.value = 
      devices.map((d) => BarcodeScannerDevice.fromMap(d)).toList();
  
  // è‡ªåŠ¨é€‰æ‹©å·²è¿æ¥è®¾å¤‡
  final connectedDevice = detectedScanners
      .firstWhereOrNull((device) => device.isConnected);
  
  if (connectedDevice != null) {
    selectedScanner.value = connectedDevice;
    await startListening();
  }
  
  isScanning.value = false;
}
```

### 2. USBæƒé™è¯·æ±‚

**æµç¨‹**ï¼š
1. ç”¨æˆ·ç‚¹å‡»æœªè¿æ¥çš„è®¾å¤‡
2. åº”ç”¨è¯·æ±‚USBæƒé™
3. ç³»ç»Ÿå¼¹å‡ºæƒé™å¯¹è¯æ¡†
4. ç”¨æˆ·æˆæƒåè‡ªåŠ¨é‡æ–°æ‰«æ

**Dartå±‚**

```dart
Future<bool> requestPermission(String deviceId) async {
  final bool granted = await _channel.invokeMethod(
    'requestPermission',
    {'deviceId': deviceId},
  );
  
  if (granted) {
    await scanUsbScanners(); // é‡æ–°æ‰«ææ›´æ–°çŠ¶æ€
  }
  
  return granted;
}
```

**åŸç”Ÿå±‚**

```kotlin
private fun requestPermission(call: MethodCall, result: Result) {
    val deviceId = call.argument<String>("deviceId")
    val device = findDeviceById(deviceId)
    
    if (usbManager?.hasPermission(device) == true) {
        result.success(true)
        return
    }
    
    val permissionIntent = PendingIntent.getBroadcast(
        context, 0, Intent(ACTION_USB_PERMISSION),
        PendingIntent.FLAG_MUTABLE
    )
    
    usbManager?.requestPermission(device, permissionIntent)
    result.success(false) // æƒé™è¯·æ±‚å·²å‘èµ·
}
```

### 3. é”®ç›˜äº‹ä»¶ç›‘å¬

**UIå±‚ (qr_scanner_config_view.dart)**

```dart
@override
Widget build(BuildContext context) {
  return RawKeyboardListener(
    focusNode: _keyboardFocusNode,
    autofocus: true,
    onKey: _handleKeyEvent,
    child: Container(...),
  );
}

void _handleKeyEvent(RawKeyEvent event) {
  if (event is RawKeyDownEvent) {
    final keyCode = event.logicalKey.keyId;
    _scannerService.channel.invokeMethod('handleKeyEvent', {
      'keyCode': keyCode,
      'action': 0, // ACTION_DOWN
    });
  }
}
```

**åŸç”Ÿå±‚**

```kotlin
private fun handleKeyEvent(call: MethodCall, result: Result) {
    if (!isListening) return
    
    val keyCode = call.argument<Int>("keyCode") ?: 0
    val currentTime = System.currentTimeMillis()
    
    // è¶…æ—¶æ£€æµ‹ï¼ˆæ–°çš„æ‰«ç å¼€å§‹ï¼‰
    if (lastKeyTime > 0 && (currentTime - lastKeyTime) > scanTimeout) {
        if (scanBuffer.isNotEmpty()) {
            processScanData()
        }
        scanBuffer.clear()
    }
    
    lastKeyTime = currentTime
    
    when (keyCode) {
        KeyEvent.KEYCODE_ENTER -> {
            // å›è½¦é”® = æ‰«ç ç»“æŸ
            if (scanBuffer.isNotEmpty()) {
                processScanData()
                scanBuffer.clear()
            }
        }
        else -> {
            // æ·»åŠ å­—ç¬¦åˆ°ç¼“å†²åŒº
            val char = getCharFromKeyCode(keyCode)
            if (char != null) {
                scanBuffer.append(char)
            }
        }
    }
}
```

### 4. æ¡ç ç±»å‹è¯†åˆ«

**åŸç”Ÿå±‚**

```kotlin
private fun recognizeBarcodeType(data: String): String {
    return when {
        data.length == 13 && data.all { it.isDigit() } -> "EAN-13"
        data.length == 8 && data.all { it.isDigit() } -> "EAN-8"
        data.length == 12 && data.all { it.isDigit() } -> "UPC-A"
        data.startsWith("http://") || data.startsWith("https://") -> "QR Code (URL)"
        data.contains(":") || data.contains(";") -> "QR Code"
        data.all { it.isDigit() } -> "Numeric Barcode"
        else -> "Code 128 / Code 39"
    }
}

private fun processScanData() {
    val barcodeData = scanBuffer.toString().trim()
    val barcodeType = recognizeBarcodeType(barcodeData)
    
    val scanResult = hashMapOf(
        "type" to barcodeType,
        "content" to barcodeData,
        "length" to barcodeData.length,
        "timestamp" to Instant.now().toString(),
        "isValid" to true
    )
    
    channel.invokeMethod("onScanResult", scanResult)
}
```

---

## ğŸ¯ ä½¿ç”¨æµç¨‹

### æ­¥éª¤1ï¼šè¿æ¥æ‰«æå™¨

1. å°†USBæ¥æ”¶å™¨æ’å…¥Androidè®¾å¤‡
2. æ‰“å¼€æ‰«æå™¨ç”µæºå¼€å…³
3. ç­‰å¾…æ‰«æå™¨ä¸æ¥æ”¶å™¨é…å¯¹ï¼ˆLEDæŒ‡ç¤ºç¯ï¼‰

### æ­¥éª¤2ï¼šæ‰«æè®¾å¤‡

1. è¿›å…¥"è®¾ç½® â†’ äºŒç»´ç æ‰«æå™¨"é¡µé¢
2. ç‚¹å‡»"æ‰«æUSBè®¾å¤‡"æŒ‰é’®
3. ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹USB HIDè®¾å¤‡
4. åœ¨å·¦ä¾§åˆ—è¡¨ä¸­æ˜¾ç¤ºæ£€æµ‹åˆ°çš„æ‰«æå™¨

### æ­¥éª¤3ï¼šæˆäºˆæƒé™

1. ç‚¹å‡»è®¾å¤‡åˆ—è¡¨ä¸­æ˜¾ç¤º"æœªè¿æ¥"çš„è®¾å¤‡
2. ç³»ç»Ÿå¼¹å‡ºUSBæƒé™è¯·æ±‚å¯¹è¯æ¡†
3. ç‚¹å‡»"ç¡®å®š"æˆäºˆæƒé™
4. è®¾å¤‡çŠ¶æ€è‡ªåŠ¨æ›´æ–°ä¸º"å·²è¿æ¥"

### æ­¥éª¤4ï¼šå¼€å§‹æ‰«æ

1. é€‰ä¸­çš„è®¾å¤‡ä¼šè‡ªåŠ¨å¼€å§‹ç›‘å¬
2. ä¸­é—´åŒºåŸŸæ˜¾ç¤º"å‡†å¤‡å°±ç»ªï¼Œè¯·æ‰«ææ¡ç ..."
3. å°†æ¡ç å¯¹å‡†æ‰«æå™¨æ„Ÿåº”åŒº
4. å¬åˆ°"å“”"å£°åï¼Œæ‰«ææ•°æ®æ˜¾ç¤ºåœ¨å³ä¾§

### æ­¥éª¤5ï¼šæŸ¥çœ‹ç»“æœ

å³ä¾§æ•°æ®åŒºåŸŸæ˜¾ç¤ºï¼š
- **æ•°æ®ç±»å‹**ï¼šEAN-13ã€QR Codeç­‰
- **æ‰«æå†…å®¹**ï¼šæ¡ç æ•°æ®
- **æ•°æ®é•¿åº¦**ï¼šå­—ç¬¦æ•°
- **æ‰«ææ—¶é—´**ï¼šç²¾ç¡®åˆ°ç§’

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæœªæ£€æµ‹åˆ°æ‰«æå™¨

**å¯èƒ½åŸå› **ï¼š
- USBæ¥æ”¶å™¨æœªæ’å¥½
- æ‰«æå™¨æœªå¼€æœº
- æ‰«æå™¨ä¸æ¥æ”¶å™¨æœªé…å¯¹

**è§£å†³æ–¹æ³•**ï¼š
1. é‡æ–°æ’æ‹”USBæ¥æ”¶å™¨
2. å…³é—­æ‰«æå™¨ç”µæºï¼Œç­‰å¾…3ç§’åé‡æ–°å¼€å¯
3. æŸ¥çœ‹æ‰«æå™¨LEDæŒ‡ç¤ºç¯æ˜¯å¦å¸¸äº®ï¼ˆé…å¯¹æˆåŠŸï¼‰
4. ç‚¹å‡»"æ‰«æUSBè®¾å¤‡"é‡æ–°æ£€æµ‹

### é—®é¢˜2ï¼šæ£€æµ‹åˆ°è®¾å¤‡ä½†æ— æ³•è¿æ¥

**å¯èƒ½åŸå› **ï¼š
- USBæƒé™æœªæˆäºˆ
- ç³»ç»ŸUSBæœåŠ¡å¼‚å¸¸

**è§£å†³æ–¹æ³•**ï¼š
1. ç‚¹å‡»è®¾å¤‡å¡ç‰‡ï¼Œç³»ç»Ÿä¼šå¼¹å‡ºæƒé™è¯·æ±‚
2. å¦‚æœæ²¡æœ‰å¼¹å‡ºï¼Œå°è¯•é‡å¯åº”ç”¨
3. æ£€æŸ¥ç³»ç»Ÿè®¾ç½® â†’ åº”ç”¨ â†’ ailand_pos â†’ æƒé™

### é—®é¢˜3ï¼šæ‰«ææ— ååº”

**å¯èƒ½åŸå› **ï¼š
- æ‰«æå™¨æœªè¿›å…¥é”®ç›˜æ¨¡å¼
- é¡µé¢å¤±å»ç„¦ç‚¹
- æ¡ç è´¨é‡å·®æˆ–æ ¼å¼ä¸æ”¯æŒ

**è§£å†³æ–¹æ³•**ï¼š
1. ç¡®è®¤æ‰«æå™¨å·¥ä½œåœ¨HIDé”®ç›˜æ¨¡å¼ï¼ˆæŸ¥é˜…è¯´æ˜ä¹¦è®¾ç½®ï¼‰
2. ç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®ï¼Œç¡®ä¿é¡µé¢è·å¾—ç„¦ç‚¹
3. å°è¯•æ‰«æå…¶ä»–æ¡ç æµ‹è¯•
4. æ£€æŸ¥ä¸­é—´åŒºåŸŸæ˜¯å¦æ˜¾ç¤º"å‡†å¤‡å°±ç»ª"

### é—®é¢˜4ï¼šæ‰«ææ•°æ®é”™è¯¯

**å¯èƒ½åŸå› **ï¼š
- æ‰«æé€Ÿåº¦è¿‡å¿«
- æ¡ç æŸåæˆ–æ¨¡ç³Š
- æ‰«æå™¨è®¾ç½®é—®é¢˜

**è§£å†³æ–¹æ³•**ï¼š
1. æ‰«ææ—¶ä¿æŒç¨³å®šï¼Œç­‰å¾…"å“”"å£°åå†ç§»å¼€
2. ç¡®ä¿æ¡ç æ¸…æ™°å¯è§ï¼Œæ— é®æŒ¡
3. è°ƒæ•´æ‰«æå™¨çµæ•åº¦è®¾ç½®ï¼ˆå‚è€ƒè¯´æ˜ä¹¦ï¼‰

---

## âš™ï¸ é«˜çº§é…ç½®

### æ‰«æå™¨å·¥ä½œæ¨¡å¼

å¾—åŠ›No.14952Wæ”¯æŒå¤šç§æ‰«ææ¨¡å¼ï¼Œé€šè¿‡æ‰«æé…ç½®æ¡ç åˆ‡æ¢ï¼š

1. **HIDé”®ç›˜æ¨¡å¼**ï¼ˆå½“å‰ä½¿ç”¨ï¼‰
   - æ‰«æå™¨æ¨¡æ‹Ÿé”®ç›˜è¾“å…¥
   - å…¼å®¹æ€§æœ€å¥½
   - æ— éœ€é©±åŠ¨

2. **ä¸²å£æ¨¡å¼**
   - é€šè¿‡ä¸²å£é€šä¿¡
   - éœ€è¦ä¸²å£é©±åŠ¨
   - é«˜çº§åº”ç”¨åœºæ™¯

**åˆ‡æ¢æ–¹æ³•**ï¼š
1. å‚è€ƒæ‰«æå™¨è¯´æ˜ä¹¦é™„å½•çš„é…ç½®æ¡ç 
2. ä¾æ¬¡æ‰«æï¼šå¤ä½æ¡ç  â†’ HIDé”®ç›˜æ¨¡å¼æ¡ç  â†’ ä¿å­˜è®¾ç½®æ¡ç 

### æ”¯æŒçš„æ¡ç æ ¼å¼

å¾—åŠ›No.14952Wæ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š

**ä¸€ç»´ç **ï¼š
- EAN-13 / EAN-8
- UPC-A / UPC-E
- Code 128 / Code 39
- Codabar
- Interleaved 2 of 5

**äºŒç»´ç **ï¼š
- QR Code
- Data Matrix
- PDF417

### æ€§èƒ½ä¼˜åŒ–

**æé«˜æ‰«æé€Ÿåº¦**ï¼š
1. åªå¯ç”¨éœ€è¦çš„æ¡ç æ ¼å¼ï¼ˆæ‰«æé…ç½®æ¡ç ï¼‰
2. è°ƒæ•´æ‰«æçµæ•åº¦ä¸º"é«˜é€Ÿæ¨¡å¼"
3. ä¿æŒæ¡ç æ¸…æ™°æ— æŸ

**å‡å°‘è¯¯è¯»**ï¼š
1. å¯ç”¨æ ¡éªŒä½éªŒè¯
2. è®¾ç½®æœ€å°/æœ€å¤§ç é•¿é™åˆ¶
3. ä½¿ç”¨"åŒæ‰«æç¡®è®¤"æ¨¡å¼ï¼ˆæ‰«æé…ç½®æ¡ç ï¼‰

---

## ğŸ“Š æŠ€æœ¯ç»†èŠ‚

### USB HIDåè®®

æ‰«æå™¨ä½œä¸ºHIDé”®ç›˜è®¾å¤‡ï¼Œéµå¾ªä»¥ä¸‹è§„èŒƒï¼š
- **USB Class**: 0x03 (HID)
- **Interface Class**: 0x03 (HID)
- **Interface SubClass**: 0x01 (Boot Interface)
- **Interface Protocol**: 0x01 (Keyboard)

### é”®ç›˜è¾“å…¥å¤„ç†

**æ•°æ®æµ**ï¼š
```
æ‰«æå™¨ â†’ USBæ¥æ”¶å™¨ â†’ Androidç³»ç»Ÿ â†’ KeyEvent â†’ Flutter
```

**æ—¶åºæ§åˆ¶**ï¼š
- **æ‰«ç é—´éš”**ï¼š100ms
- **å­—ç¬¦é—´éš”**ï¼š10-50msï¼ˆç”±æ‰«æå™¨æ§åˆ¶ï¼‰
- **ç»“æŸæ ‡è¯†**ï¼šå›è½¦é”®ï¼ˆKeyEvent.KEYCODE_ENTERï¼‰

### è®¾å¤‡è¯†åˆ«é€»è¾‘

```kotlin
// 1. æ£€æŸ¥USBæ¥å£ç±»
if (usbInterface.interfaceClass == USB_CLASS_HID) {
    return true
}

// 2. æ£€æŸ¥å‚å•†ID
if (device.vendorId in KNOWN_SCANNER_VENDORS) {
    return true
}

// 3. æ£€æŸ¥äº§å“åç§°
if (productName.contains("scanner") || 
    productName.contains("barcode")) {
    return true
}
```

---

## ğŸ”— ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [å¾—åŠ›å®˜ç½‘](https://www.deli-office.com/)
- [äº§å“æ‰‹å†Œ](https://www.deli-office.com/products/scanner/14952W)

### Androidå¼€å‘æ–‡æ¡£
- [USB Host API](https://developer.android.com/guide/topics/connectivity/usb/host)
- [KeyEvent Reference](https://developer.android.com/reference/android/view/KeyEvent)

### é¡¹ç›®ä»£ç 
- `lib/data/services/barcode_scanner_service.dart` - æœåŠ¡å±‚
- `android/app/src/main/kotlin/.../BarcodeScannerPlugin.kt` - åŸç”Ÿå±‚
- `lib/modules/settings/views/qr_scanner_config_view.dart` - UIå±‚

---

## ğŸ“ å¼€å‘æ³¨æ„äº‹é¡¹

### 1. æƒé™å£°æ˜

ç¡®ä¿ `AndroidManifest.xml` ä¸­å·²å£°æ˜USBæƒé™ï¼š

```xml
<uses-feature android:name="android.hardware.usb.host" />
<uses-permission android:name="android.permission.USB_PERMISSION" />
```

### 2. ç„¦ç‚¹ç®¡ç†

UIå¿…é¡»æŒæœ‰é”®ç›˜ç„¦ç‚¹æ‰èƒ½æ¥æ”¶äº‹ä»¶ï¼š

```dart
RawKeyboardListener(
  focusNode: _keyboardFocusNode,
  autofocus: true,  // è‡ªåŠ¨è·å–ç„¦ç‚¹
  onKey: _handleKeyEvent,
  child: ...,
)
```

### 3. ç”Ÿå‘½å‘¨æœŸ

æœåŠ¡éœ€è¦æ­£ç¡®åˆå§‹åŒ–å’Œæ¸…ç†ï¼š

```dart
@override
void onInit() {
  super.onInit();
  _setupMethodCallHandler();
}

@override
void onClose() {
  stopListening();
  super.onClose();
}
```

### 4. é”™è¯¯å¤„ç†

æ‰€æœ‰å¼‚æ­¥æ“ä½œéƒ½åº”æ•è·å¼‚å¸¸ï¼š

```dart
try {
  await _channel.invokeMethod('scanUsbScanners');
} catch (e) {
  lastError.value = 'æ‰«æå¤±è´¥: $e';
  _addLog('âœ— æ‰«æå¤±è´¥: $e');
}
```

---

## ğŸ“ æ‰©å±•åŠŸèƒ½

### æœªæ¥å¯å®ç°çš„åŠŸèƒ½

1. **æ‰«æå†å²è®°å½•**
   - å­˜å‚¨æœ€è¿‘100æ¡æ‰«æè®°å½•
   - æ”¯æŒå¯¼å‡ºä¸ºCSV/Excel
   - ç»Ÿè®¡åˆ†æåŠŸèƒ½

2. **æ¡ç éªŒè¯**
   - EAN-13/UPCæ ¡éªŒä½éªŒè¯
   - è‡ªå®šä¹‰è§„åˆ™éªŒè¯
   - é‡å¤æ‰«ææ£€æµ‹

3. **å¤šè®¾å¤‡æ”¯æŒ**
   - åŒæ—¶è¿æ¥å¤šä¸ªæ‰«æå™¨
   - è®¾å¤‡æ ‡è¯†å’ŒåŒºåˆ†
   - å¤šé€šé“æ•°æ®æµ

4. **éŸ³æ•ˆå’Œéœ‡åŠ¨åé¦ˆ**
   - æ‰«ææˆåŠŸæç¤ºéŸ³
   - é”™è¯¯è­¦å‘ŠéŸ³
   - éœ‡åŠ¨åé¦ˆ

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–å‚è€ƒï¼š
- é¡¹ç›®ä»“åº“ï¼š[GitHubé“¾æ¥]
- é—®é¢˜åé¦ˆï¼š[Issuesé“¾æ¥]
- æŠ€æœ¯æ–‡æ¡£ï¼š[æ–‡æ¡£é“¾æ¥]

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-11-18  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ
